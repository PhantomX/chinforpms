From e165431f3237f8e138a36d0cc8a76ae3df521c7b Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Wed, 30 Mar 2022 08:33:19 -0300
Subject: [PATCH] Use system qhexedit

---
 CMakeLists.txt | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index a850281..d64e4e1 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -10,6 +10,8 @@ set(CMAKE_INCLUDE_CURRENT_DIR ON)
 
 cmake_policy(SET CMP0010 NEW)
 
+option(USE_SYSTEM_QHEXEDIT "Dynamically link against system qhexedit" OFF)
+
 project( blackchocobo VERSION 1.80.0 DESCRIPTION "Final Fantasy 7 Save Editor")
 # Get the version from git if it's a git repository
 IF(EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/.git)
@@ -92,5 +94,11 @@ get_filename_component(_qt_bin_dir "${_qmake_executable}" DIRECTORY)
 add_subdirectory(deploy)
 add_subdirectory(icons)
 add_subdirectory(lang)
+if(USE_SYSTEM_QHEXEDIT)
+find_package(PkgConfig REQUIRED)
+pkg_search_module(QHEXEDIT REQUIRED qhexedit2-qt6)
+add_library(QHEXEDIT INTERFACE IMPORTED GLOBAL)
+else()
 add_subdirectory(qhexedit)
+endif()
 add_subdirectory(src)
-- 
2.35.1

