From 415b9f538691ad19a396667a1c995dbeca6c509e Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Fri, 8 Oct 2021 07:55:41 -0300
Subject: [PATCH] Do not show unread counter on muted chats

---
 .../SourceFiles/dialogs/ui/dialogs_layout.cpp  | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

diff --git a/Telegram/SourceFiles/dialogs/ui/dialogs_layout.cpp b/Telegram/SourceFiles/dialogs/ui/dialogs_layout.cpp
index 759492b..82d1ad7 100644
--- a/Telegram/SourceFiles/dialogs/ui/dialogs_layout.cpp
+++ b/Telegram/SourceFiles/dialogs/ui/dialogs_layout.cpp
@@ -144,7 +144,9 @@ int PaintWideCounter(
 		UnreadBadgeStyle st;
 		st.active = active;
 		st.muted = unreadMuted;
-		paintUnreadCount(p, counter, unreadRight, unreadTop, st, &unreadWidth);
+		if (!st.muted) {
+			paintUnreadCount(p, counter, unreadRight, unreadTop, st, &unreadWidth);
+		}
 		availableWidth -= unreadWidth + st.padding;
 
 		hadOneBadge = true;
@@ -1002,13 +1004,13 @@ void PaintCollapsedRow(
 		const auto unreadRight = fullWidth - st::dialogsPadding.x();
 		UnreadBadgeStyle st;
 		st.muted = true;
-		paintUnreadCount(
-			p,
-			QString::number(unread),
-			unreadRight,
-			unreadTop,
-			st,
-			nullptr);
+		//paintUnreadCount(
+			//p,
+			//QString::number(unread),
+			//unreadRight,
+			//unreadTop,
+			//st,
+			//nullptr);
 	}
 }
 
-- 
2.32.0

