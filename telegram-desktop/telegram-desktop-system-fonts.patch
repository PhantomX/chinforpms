From 7dae800678004cf3365d02c582ffb1ffdd571bde Mon Sep 17 00:00:00 2001
From: Vitaly Zaitsev <vitaly@easycoding.org>
Date: Sun, 24 Jun 2018 22:59:34 +0200
Subject: [PATCH 2/3] Backported and rebased patch from Debian maintainer
 Nicholas Guriev. Removed links to packaged Open Sans fonts. Telegram Desktop
 will use packaged versions.

---
 Telegram/lib_ui/fonts/fonts.qrc              | 8 --------
 Telegram/lib_ui/ui/style/style_core_font.cpp | 2 +-
 2 files changed, 1 insertion(+), 9 deletions(-)

diff --git a/Telegram/lib_ui/fonts/fonts.qrc b/Telegram/lib_ui/fonts/fonts.qrc
index fb1208d..03585ec 100644
--- a/Telegram/lib_ui/fonts/fonts.qrc
+++ b/Telegram/lib_ui/fonts/fonts.qrc
@@ -1,10 +1,2 @@
 <RCC>
-  <qresource prefix="/gui/fonts">
-    <file>DAOpenSansRegular.ttf</file>
-    <file>DAOpenSansRegularItalic.ttf</file>
-    <file>DAOpenSansBold.ttf</file>
-    <file>DAOpenSansBoldItalic.ttf</file>
-    <file>DAOpenSansSemibold.ttf</file>
-    <file>DAOpenSansSemiboldItalic.ttf</file>
-  </qresource>
 </RCC>
diff --git a/Telegram/lib_ui/ui/style/style_core_font.cpp b/Telegram/lib_ui/ui/style/style_core_font.cpp
index cfe2111..33b50c9 100644
--- a/Telegram/lib_ui/ui/style/style_core_font.cpp
+++ b/Telegram/lib_ui/ui/style/style_core_font.cpp
@@ -135,7 +135,7 @@ void StartFonts() {
 	for (auto i = 0; i != FontTypesCount; ++i) {
 		const auto name = FontTypeNames[i];
 		const auto flags = FontTypeFlags[i];
-		areGood[i] = LoadCustomFont(":/gui/fonts/" + name + ".ttf", name, flags);
+		areGood[i] = ValidateFont(QStringLiteral("Open Sans"));
 		Overrides[i] = name;
 #ifdef Q_OS_WIN
 		// Attempt to workaround a strange font bug with Open Sans Semibold not loading.
-- 
2.24.1

