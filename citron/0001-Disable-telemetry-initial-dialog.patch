From 4e740224bed36dd4f1eb5d07f6dddb29dd229d31 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Wed, 9 Feb 2022 10:26:57 -0300
Subject: [PATCH] Disable telemetry initial dialog

Set default to false, if needed, enabled it in options
---
 src/citron/main.cpp   | 10 ++--------
 src/common/settings.h |  2 +-
 2 files changed, 3 insertions(+), 9 deletions(-)

diff --git a/src/citron/main.cpp b/src/citron/main.cpp
index eb1571f..542cb98 100644
--- a/src/citron/main.cpp
+++ b/src/citron/main.cpp
@@ -210,14 +210,8 @@ void GMainWindow::ShowTelemetryCallout() {
 
     UISettings::values.callout_flags =
         UISettings::values.callout_flags.GetValue() | static_cast<uint32_t>(CalloutFlag::Telemetry);
-    const QString telemetry_message =
-        tr("<a href='https://citron-emu.org/help/feature/telemetry/'>Anonymous "
-           "data is collected</a> to help improve citron. "
-           "<br/><br/>Would you like to share your usage data with us?");
-    if (!question(this, tr("Telemetry"), telemetry_message)) {
-        Settings::values.enable_telemetry = false;
-        system->ApplySettings();
-    }
+    Settings::values.enable_telemetry = false;
+    system->ApplySettings();
 }
 
 const int GMainWindow::max_recent_files_item;
diff --git a/src/common/settings.h b/src/common/settings.h
index 06253ed..e21de8d 100644
--- a/src/common/settings.h
+++ b/src/common/settings.h
@@ -609,7 +609,7 @@ struct Values {
                                            Category::Network};
 
     // WebService
-    Setting<bool> enable_telemetry{linkage, true, "enable_telemetry", Category::WebService};
+    Setting<bool> enable_telemetry{linkage, false, "enable_telemetry", Category::WebService};
     Setting<std::string> web_api_url{linkage, "api.ynet-fun.xyz", "web_api_url",
                                      Category::WebService};
     Setting<std::string> citron_username{linkage, std::string(), "citron_username",
-- 
2.48.1

