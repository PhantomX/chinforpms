From df30c1c6786d6fd3524d80c147efac82e96219b5 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Tue, 16 Nov 2021 16:23:04 -0300
Subject: [PATCH] disable overlay scrolling

---
 src/lib/adwaita.h          | 2 +-
 src/style/adwaitastyle.cpp | 8 +++-----
 2 files changed, 4 insertions(+), 6 deletions(-)

diff --git a/src/lib/adwaita.h b/src/lib/adwaita.h
index 833f165..d5b065b 100644
--- a/src/lib/adwaita.h
+++ b/src/lib/adwaita.h
@@ -76,7 +76,7 @@ namespace Config
     const int ProgressBarBusyStepDuration {600};
     const int ScrollBarAddLineButtons {0};
     const int ScrollBarSubLineButtons {0};
-    const bool ScrollBarShowOnMouseOver {true};
+    const bool ScrollBarShowOnMouseOver {false};
     const int MnemonicsMode {MN_AUTO};
     const bool ToolBarDrawItemSeparator {0};
     const bool ViewDrawFocusIndicator {true};
diff --git a/src/style/adwaitastyle.cpp b/src/style/adwaitastyle.cpp
index 146f9ca..73694a4 100644
--- a/src/style/adwaitastyle.cpp
+++ b/src/style/adwaitastyle.cpp
@@ -5394,7 +5394,7 @@ bool Style::drawScrollBarSliderControl(const QStyleOption *option, QPainter *pai
     QRect handleRect;
 
     bool enabled(state & State_Enabled);
-    bool mouseOver((state & State_Active) && enabled && (state & State_MouseOver));
+    bool mouseOver(true);
     bool sunken(enabled && (state & (State_On | State_Sunken)));
 
     // check focus from relevant parent
@@ -7025,11 +7025,9 @@ bool Style::drawScrollBarComplexControl(const QStyleOptionComplex *option, QPain
     bool enabled(option->state & State_Enabled);
     qreal opacity(_animations->scrollBarEngine().opacity(widget, QStyle::SC_ScrollBarGroove));
     bool animated(Adwaita::Config::ScrollBarShowOnMouseOver && _animations->scrollBarEngine().isAnimated(widget,  AnimationHover, QStyle::SC_ScrollBarGroove));
-    bool mouseOver((option->state & State_Active) && option->state & State_MouseOver);
+    bool mouseOver(true);
 
-    if (opacity == AnimationData::OpacityInvalid) {
-        opacity = 1;
-    }
+    opacity = 1;
 
     // render full groove directly, rather than using the addPage and subPage control element methods
     if ((mouseOver || animated) && option->subControls & SC_ScrollBarGroove) {
-- 
2.33.1

