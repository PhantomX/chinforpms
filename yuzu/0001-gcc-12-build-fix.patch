From 200ab06c0ccfffdadff1d7a4b7e1df5be44e7d35 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Wed, 30 Mar 2022 20:03:17 -0300
Subject: [PATCH] gcc 12 build fix

---
 src/common/common_types.h                               | 6 ++++++
 src/common/settings.cpp                                 | 6 ++++++
 src/core/file_sys/content_archive.cpp                   | 6 ++++++
 src/core/hle/service/sockets/bsd.cpp                    | 6 ++++++
 src/input_common/drivers/udp_client.cpp                 | 1 +
 src/shader_recompiler/frontend/maxwell/control_flow.cpp | 6 ++++++
 src/shader_recompiler/ir_opt/verification_pass.cpp      | 6 ++++++
 src/video_core/macro/macro_jit_x64.cpp                  | 6 ++++++
 8 files changed, 43 insertions(+)

diff --git a/src/common/common_types.h b/src/common/common_types.h
index 0fc225a..f625bcf 100755
--- a/src/common/common_types.h
+++ b/src/common/common_types.h
@@ -31,6 +31,12 @@
 #include <array>
 #include <cstdint>
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Warray-bounds"
+#endif
+#endif
+
 using u8 = std::uint8_t;   ///< 8-bit unsigned byte
 using u16 = std::uint16_t; ///< 16-bit unsigned short
 using u32 = std::uint32_t; ///< 32-bit unsigned word
diff --git a/src/common/settings.cpp b/src/common/settings.cpp
index 9a9c74a..156168d 100755
--- a/src/common/settings.cpp
+++ b/src/common/settings.cpp
@@ -8,6 +8,12 @@
 #include "common/logging/log.h"
 #include "common/settings.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Wmaybe-uninitialized"
+#endif
+#endif
+
 namespace Settings {
 
 Values values;
diff --git a/src/core/file_sys/content_archive.cpp b/src/core/file_sys/content_archive.cpp
index 93f7844..a86d5f1 100755
--- a/src/core/file_sys/content_archive.cpp
+++ b/src/core/file_sys/content_archive.cpp
@@ -16,6 +16,12 @@
 #include "core/file_sys/vfs_offset.h"
 #include "core/loader/loader.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Wmaybe-uninitialized"
+#endif
+#endif
+
 namespace FileSys {
 
 // Media offsets in headers are stored divided by 512. Mult. by this to get real offset.
diff --git a/src/core/hle/service/sockets/bsd.cpp b/src/core/hle/service/sockets/bsd.cpp
index 5114b8b..cb72a2c 100755
--- a/src/core/hle/service/sockets/bsd.cpp
+++ b/src/core/hle/service/sockets/bsd.cpp
@@ -16,6 +16,12 @@
 #include "core/network/network.h"
 #include "core/network/sockets.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Wmaybe-uninitialized"
+#endif
+#endif
+
 namespace Service::Sockets {
 
 namespace {
diff --git a/src/input_common/drivers/udp_client.cpp b/src/input_common/drivers/udp_client.cpp
index 825262a..89f2a54 100755
--- a/src/input_common/drivers/udp_client.cpp
+++ b/src/input_common/drivers/udp_client.cpp
@@ -3,6 +3,7 @@
 // Refer to the license.txt file included.
 
 #include <random>
+#include <utility>
 #include <boost/asio.hpp>
 #include <fmt/format.h>
 
diff --git a/src/shader_recompiler/frontend/maxwell/control_flow.cpp b/src/shader_recompiler/frontend/maxwell/control_flow.cpp
index 6939692..8655050 100755
--- a/src/shader_recompiler/frontend/maxwell/control_flow.cpp
+++ b/src/shader_recompiler/frontend/maxwell/control_flow.cpp
@@ -15,6 +15,12 @@
 #include "shader_recompiler/frontend/maxwell/indirect_branch_table_track.h"
 #include "shader_recompiler/frontend/maxwell/location.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Wstringop-overread"
+#endif
+#endif
+
 namespace Shader::Maxwell::Flow {
 namespace {
 struct Compare {
diff --git a/src/shader_recompiler/ir_opt/verification_pass.cpp b/src/shader_recompiler/ir_opt/verification_pass.cpp
index f89f4ac..5e75018 100755
--- a/src/shader_recompiler/ir_opt/verification_pass.cpp
+++ b/src/shader_recompiler/ir_opt/verification_pass.cpp
@@ -9,6 +9,12 @@
 #include "shader_recompiler/frontend/ir/value.h"
 #include "shader_recompiler/ir_opt/passes.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Wrange-loop-construct"
+#endif
+#endif
+
 namespace Shader::Optimization {
 
 static void ValidateTypes(const IR::Program& program) {
diff --git a/src/video_core/macro/macro_jit_x64.cpp b/src/video_core/macro/macro_jit_x64.cpp
index dc2b490..256a7c2 100755
--- a/src/video_core/macro/macro_jit_x64.cpp
+++ b/src/video_core/macro/macro_jit_x64.cpp
@@ -17,6 +17,12 @@
 #include "video_core/macro/macro_interpreter.h"
 #include "video_core/macro/macro_jit_x64.h"
 
+#ifdef __GNUC__
+#ifndef __clang__
+#pragma GCC diagnostic ignored "-Warray-bounds"
+#endif
+#endif
+
 MICROPROFILE_DEFINE(MacroJitCompile, "GPU", "Compile macro JIT", MP_RGB(173, 255, 47));
 MICROPROFILE_DEFINE(MacroJitExecute, "GPU", "Execute macro JIT", MP_RGB(255, 255, 0));
 
-- 
2.36.0

