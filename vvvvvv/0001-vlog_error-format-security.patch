From 2ef6d2039c191554d0a16e2cf11e9286b82abe4d Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Tue, 23 Nov 2021 21:06:57 -0300
Subject: [PATCH] vlog_error: format-security

---
 desktop_version/src/FileSystemUtils.cpp | 6 +++---
 desktop_version/src/Graphics.cpp        | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/desktop_version/src/FileSystemUtils.cpp b/desktop_version/src/FileSystemUtils.cpp
index 6b39b9a..8808e93 100644
--- a/desktop_version/src/FileSystemUtils.cpp
+++ b/desktop_version/src/FileSystemUtils.cpp
@@ -150,7 +150,7 @@ int FILESYSTEM_init(char *argvZero, char* baseDir, char *assetsPath)
     else
     {
         SDL_snprintf(output, sizeof(output), "%s%s",
-            "_RPM_DATA_DIR_/VVVVVV/",
+            "/usr/share/VVVVVV/",
             "data.zip"
         );
     }
@@ -173,7 +173,7 @@ int FILESYSTEM_init(char *argvZero, char* baseDir, char *assetsPath)
         goto end;
     }
 
-    SDL_snprintf(output, sizeof(output), "%s%s", "_RPM_DATA_DIR_/SDL_GameControllerDB/", "gamecontrollerdb.txt");
+    SDL_snprintf(output, sizeof(output), "%s%s", "/usr/share/SDL_GameControllerDB/", "gamecontrollerdb.txt");
     if (SDL_GameControllerAddMappingsFromFile(output) < 0)
     {
         vlog_info("gamecontrollerdb.txt not found!");
@@ -306,7 +306,7 @@ static int setLevelDirError(const char* text, ...)
     retval = SDL_vsnprintf(levelDirError, sizeof(levelDirError), text, list);
     va_end(list);
 
-    vlog_error(levelDirError);
+    vlog_error("%s", levelDirError);
 
     return retval;
 }
diff --git a/desktop_version/src/Graphics.cpp b/desktop_version/src/Graphics.cpp
index 30c76d4..42dcc19 100644
--- a/desktop_version/src/Graphics.cpp
+++ b/desktop_version/src/Graphics.cpp
@@ -321,7 +321,7 @@ void Graphics::updatetitlecolours(void)
         SDL_snprintf(error, sizeof(error), error_fmt, #tilesheet, tile_square); \
         SDL_snprintf(error_title, sizeof(error_title), error_title_fmt, #tilesheet); \
         \
-        vlog_error(error); \
+        vlog_error("%s", error); \
         \
         return false; \
     }
-- 
2.33.1

