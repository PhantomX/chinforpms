From 380096cd421578f28813494b48125231a2d8279f Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Sat, 11 Jan 2020 18:56:40 -0300
Subject: [PATCH] System tinyxml

---
 desktop_version/CMakeLists.txt | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/desktop_version/CMakeLists.txt b/desktop_version/CMakeLists.txt
index 5249028..baaae92 100644
--- a/desktop_version/CMakeLists.txt
+++ b/desktop_version/CMakeLists.txt
@@ -50,6 +50,8 @@ IF(NOT WIN32)
 	SET(CMAKE_INSTALL_RPATH_USE_LINK_PATH FALSE)
 ENDIF()
 
+find_package(PkgConfig REQUIRED)
+
 # Include Directories
 INCLUDE_DIRECTORIES(src tinyxml physfs lodepng)
 
@@ -130,7 +132,10 @@ IF(ENABLE_WARNINGS)
 ENDIF()
 
 # Library information
-ADD_LIBRARY(tinyxml-static STATIC ${XML_SRC})
+add_library(tinyxml-static INTERFACE IMPORTED GLOBAL)
+pkg_check_modules(TINYXML REQUIRED tinyxml)
+target_include_directories(tinyxml-static INTERFACE ${TINYXML_INCLUDE_DIRS})
+target_link_libraries(tinyxml-static INTERFACE ${TINYXML_LIBRARIES})
 ADD_LIBRARY(physfs-static STATIC ${PFS_SRC} ${PFSP_SRC})
 ADD_LIBRARY(lodepng-static STATIC ${PNG_SRC})
 
-- 
2.24.1

