From 2fa39dd0471d5a5b6256abddbd1aea00a045bec9 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Mon, 18 Apr 2022 09:57:41 -0300
Subject: [PATCH] CSD: server side shadow

---
 gtk/gtkwindow.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/gtk/gtkwindow.c b/gtk/gtkwindow.c
index 72df1ee..7cb4bf6 100644
--- a/gtk/gtkwindow.c
+++ b/gtk/gtkwindow.c
@@ -3000,6 +3000,8 @@ gtk_window_supports_client_shadow (GtkWindow *window)
       if (!gdk_x11_screen_supports_net_wm_hint (gdk_x11_display_get_screen (display),
                                                 g_intern_static_string ("_GTK_FRAME_EXTENTS")))
         return FALSE;
+      if (g_strcmp0 (g_getenv ("GTK_CSD"), "1") != 0)
+        return FALSE;
     }
 #endif
 
-- 
2.35.1

