From 2a83a7faa096718e6c163b4c1e8d658eece2ebe8 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Thu, 23 Jun 2022 09:39:45 -0300
Subject: [PATCH] Update default paths

---
 pcsx2-qt/QtHost.cpp | 15 +++------------
 1 file changed, 3 insertions(+), 12 deletions(-)

diff --git a/pcsx2-qt/QtHost.cpp b/pcsx2-qt/QtHost.cpp
index 0b23c92..df7a134 100644
--- a/pcsx2-qt/QtHost.cpp
+++ b/pcsx2-qt/QtHost.cpp
@@ -162,7 +162,7 @@ void QtHost::SetResourcesDirectory()
 {
 #ifndef __APPLE__
 	// On Windows/Linux, these are in the binary directory.
-	EmuFolders::Resources = Path::Combine(EmuFolders::AppRoot, "resources");
+	EmuFolders::Resources = Path::Combine("_RPM_DATADIR_/PCSX2", "resources");
 #else
 	// On macOS, this is in the bundle resources directory.
 	EmuFolders::Resources = Path::Canonicalize(Path::Combine(EmuFolders::AppRoot, "../Resources"));
@@ -189,25 +189,16 @@ void QtHost::SetDataDirectory()
 #elif defined(__linux__)
 	// Check for $HOME/PCSX2 first, for legacy installs.
 	const char* home_dir = getenv("HOME");
-	const std::string legacy_dir(home_dir ? Path::Combine(home_dir, "PCSX2") : std::string());
-	if (!legacy_dir.empty() && FileSystem::DirectoryExists(legacy_dir.c_str()))
-	{
-		EmuFolders::DataRoot = std::move(legacy_dir);
-	}
-	else
-	{
 		// otherwise, use $XDG_CONFIG_HOME/PCSX2.
 		const char* xdg_config_home = getenv("XDG_CONFIG_HOME");
 		if (xdg_config_home && xdg_config_home[0] == '/' && FileSystem::DirectoryExists(xdg_config_home))
 		{
 			EmuFolders::DataRoot = Path::Combine(xdg_config_home, "PCSX2");
 		}
-		else if (!legacy_dir.empty())
+		else if (home_dir && home_dir[0] == '/' && FileSystem::DirectoryExists(home_dir))
 		{
-			// fall back to the legacy PCSX2-in-home.
-			EmuFolders::DataRoot = std::move(legacy_dir);
+			EmuFolders::DataRoot = Path::Combine(home_dir, ".config/PCSX2");
 		}
-	}
 #elif defined(__APPLE__)
 	static constexpr char MAC_DATA_DIR[] = "Library/Application Support/PCSX2";
 	const char* home_dir = getenv("HOME");
-- 
2.36.1

