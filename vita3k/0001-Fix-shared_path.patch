From 790efff8ff5e61ab55de3ccc587d6a799777f3ed Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Sat, 9 Dec 2023 14:12:48 -0300
Subject: [PATCH] Fix shared_path

---
 vita3k/app/src/app_init.cpp | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/vita3k/app/src/app_init.cpp b/vita3k/app/src/app_init.cpp
index a31b887..87b51fc 100644
--- a/vita3k/app/src/app_init.cpp
+++ b/vita3k/app/src/app_init.cpp
@@ -165,10 +165,11 @@ void init_paths(Root &root_paths) {
     }
 
     // shared path
-    if (env_home != NULL)
+    if (XDG_DATA_HOME != NULL) {
+        root_paths.set_config_path(fs::path(XDG_DATA_HOME) / app_name / dir_sep);
+    } else if (env_home != NULL) {
         root_paths.set_shared_path(fs::path(env_home) / ".local/share" / app_name / dir_sep);
-
-    if (XDG_DATA_DIRS != NULL) {
+    } else if (XDG_DATA_DIRS != NULL) {
         auto env_paths = string_utils::split_string(XDG_DATA_DIRS, ':');
         for (auto &i : env_paths) {
             if (fs::exists(fs::path(i) / app_name)) {
-- 
2.43.0

