From 6e1a95fe01787b501a8a9eb8ad10819b02bb9847 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Sat, 29 Jan 2022 01:15:45 -0300
Subject: [PATCH] mfplat revert f0cd33c fixup

---
 ...001-dbghelp-Always-check-for-debug-symbols-in-BINDIR.patch | 4 ++--
 ...1-inseng-Implement-CIF-reader-and-download-functions.patch | 3 +--
 .../0003-msxml3-Implement-FreeThreadedXMLHTTP60.patch         | 3 +--
 ...ntdll-tests-Add-basic-tests-for-RtlQueryPackageIdent.patch | 3 +--
 .../0002-shell32-Add-security-property-tab.patch              | 2 +-
 ...0001-wineboot-Initialize-proxy-settings-registry-key.patch | 3 +--
 ...winemenubuilder-Create-desktop-shortcuts-with-absolu.patch | 3 +--
 .../0003-xactengine3_7-tests-Add-Global-settings-test.patch   | 3 +--
 8 files changed, 9 insertions(+), 15 deletions(-)

diff --git a/patches/dbghelp-Debug_Symbols/0001-dbghelp-Always-check-for-debug-symbols-in-BINDIR.patch b/patches/dbghelp-Debug_Symbols/0001-dbghelp-Always-check-for-debug-symbols-in-BINDIR.patch
index 6414e6c..63c2dcf 100644
--- a/patches/dbghelp-Debug_Symbols/0001-dbghelp-Always-check-for-debug-symbols-in-BINDIR.patch
+++ b/patches/dbghelp-Debug_Symbols/0001-dbghelp-Always-check-for-debug-symbols-in-BINDIR.patch
@@ -16,8 +16,8 @@ index abb440ffbe6..d200e891c8e 100644
  IMPORTLIB = dbghelp
  IMPORTS   = $(ZLIB_PE_LIBS)
  EXTRAINCL = $(ZLIB_PE_CFLAGS)
--EXTRADEFS = -DWINE_NO_LONG_TYPES -D_IMAGEHLP_SOURCE_
-+EXTRADEFS = -DWINE_NO_LONG_TYPES -D_IMAGEHLP_SOURCE_ -DBINDIR="L\"${bindir}\""
+-EXTRADEFS = -D_IMAGEHLP_SOURCE_
++EXTRADEFS = -D_IMAGEHLP_SOURCE_ -DBINDIR="L\"${bindir}\""
  DELAYIMPORTS = version
  
  C_SRCS = \
diff --git a/patches/inseng-Implementation/0001-inseng-Implement-CIF-reader-and-download-functions.patch b/patches/inseng-Implementation/0001-inseng-Implement-CIF-reader-and-download-functions.patch
index c687edd..718390f 100644
--- a/patches/inseng-Implementation/0001-inseng-Implement-CIF-reader-and-download-functions.patch
+++ b/patches/inseng-Implementation/0001-inseng-Implement-CIF-reader-and-download-functions.patch
@@ -21,8 +21,7 @@ diff --git a/dlls/inseng/Makefile.in b/dlls/inseng/Makefile.in
 index f4b1d4b915f..79121e16c94 100644
 --- a/dlls/inseng/Makefile.in
 +++ b/dlls/inseng/Makefile.in
-@@ -1,9 +1,12 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,8 +1,11 @@
  MODULE    = inseng.dll
 -IMPORTS   = uuid ole32 advapi32
 +IMPORTS   = uuid ole32 advapi32 urlmon shlwapi
diff --git a/patches/msxml3-FreeThreadedXMLHTTP60/0003-msxml3-Implement-FreeThreadedXMLHTTP60.patch b/patches/msxml3-FreeThreadedXMLHTTP60/0003-msxml3-Implement-FreeThreadedXMLHTTP60.patch
index 2e7e293..3acff44 100644
--- a/patches/msxml3-FreeThreadedXMLHTTP60/0003-msxml3-Implement-FreeThreadedXMLHTTP60.patch
+++ b/patches/msxml3-FreeThreadedXMLHTTP60/0003-msxml3-Implement-FreeThreadedXMLHTTP60.patch
@@ -18,8 +18,7 @@ diff --git a/dlls/msxml3/Makefile.in b/dlls/msxml3/Makefile.in
 index 7e3eccc0139..b14723d60fd 100644
 --- a/dlls/msxml3/Makefile.in
 +++ b/dlls/msxml3/Makefile.in
-@@ -1,6 +1,6 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,5 +1,5 @@
  MODULE    = msxml3.dll
 -IMPORTS   = $(XSLT_PE_LIBS) $(XML2_PE_LIBS) uuid urlmon shlwapi oleaut32 ole32 user32 advapi32
 +IMPORTS   = $(XSLT_PE_LIBS) $(XML2_PE_LIBS) uuid urlmon shlwapi oleaut32 ole32 user32 advapi32 rtworkq
diff --git a/patches/ntdll-RtlQueryPackageIdentity/0003-ntdll-tests-Add-basic-tests-for-RtlQueryPackageIdent.patch b/patches/ntdll-RtlQueryPackageIdentity/0003-ntdll-tests-Add-basic-tests-for-RtlQueryPackageIdent.patch
index c83abb0..67ae83c 100644
--- a/patches/ntdll-RtlQueryPackageIdentity/0003-ntdll-tests-Add-basic-tests-for-RtlQueryPackageIdent.patch
+++ b/patches/ntdll-RtlQueryPackageIdentity/0003-ntdll-tests-Add-basic-tests-for-RtlQueryPackageIdent.patch
@@ -12,8 +12,7 @@ diff --git a/dlls/ntdll/tests/Makefile.in b/dlls/ntdll/tests/Makefile.in
 index 7e0272498fa..a2c716d11d4 100644
 --- a/dlls/ntdll/tests/Makefile.in
 +++ b/dlls/ntdll/tests/Makefile.in
-@@ -1,6 +1,6 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,5 +1,5 @@
  TESTDLL   = ntdll.dll
 -IMPORTS   = user32 advapi32
 +IMPORTS   = user32 ole32 advapi32
diff --git a/patches/shell32-ACE_Viewer/0002-shell32-Add-security-property-tab.patch b/patches/shell32-ACE_Viewer/0002-shell32-Add-security-property-tab.patch
index 07febf3..a07cd14 100644
--- a/patches/shell32-ACE_Viewer/0002-shell32-Add-security-property-tab.patch
+++ b/patches/shell32-ACE_Viewer/0002-shell32-Add-security-property-tab.patch
@@ -15,7 +15,7 @@ index e31c165ccff..bb03300f9c9 100644
 --- a/dlls/shell32/Makefile.in
 +++ b/dlls/shell32/Makefile.in
 @@ -1,7 +1,7 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES -D_SHELL32_
+ EXTRADEFS = -D_SHELL32_
  MODULE    = shell32.dll
  IMPORTLIB = shell32
 -IMPORTS   = uuid shlwapi user32 gdi32 advapi32
diff --git a/patches/wineboot-ProxySettings/0001-wineboot-Initialize-proxy-settings-registry-key.patch b/patches/wineboot-ProxySettings/0001-wineboot-Initialize-proxy-settings-registry-key.patch
index 5eaa9e2..edf4c72 100644
--- a/patches/wineboot-ProxySettings/0001-wineboot-Initialize-proxy-settings-registry-key.patch
+++ b/patches/wineboot-ProxySettings/0001-wineboot-Initialize-proxy-settings-registry-key.patch
@@ -12,8 +12,7 @@ diff --git a/programs/wineboot/Makefile.in b/programs/wineboot/Makefile.in
 index 3b78729dce6..1a804595c1c 100644
 --- a/programs/wineboot/Makefile.in
 +++ b/programs/wineboot/Makefile.in
-@@ -1,7 +1,7 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,6 +1,6 @@
  MODULE    = wineboot.exe
  IMPORTS   = uuid advapi32 ws2_32 kernelbase
 -DELAYIMPORTS = shell32 shlwapi version user32 setupapi newdev
diff --git a/patches/winemenubuilder-Desktop_Icon_Path/0001-winemenubuilder-Create-desktop-shortcuts-with-absolu.patch b/patches/winemenubuilder-Desktop_Icon_Path/0001-winemenubuilder-Create-desktop-shortcuts-with-absolu.patch
index 7257842..bded92c 100644
--- a/patches/winemenubuilder-Desktop_Icon_Path/0001-winemenubuilder-Create-desktop-shortcuts-with-absolu.patch
+++ b/patches/winemenubuilder-Desktop_Icon_Path/0001-winemenubuilder-Create-desktop-shortcuts-with-absolu.patch
@@ -18,8 +18,7 @@ diff --git a/programs/winemenubuilder/Makefile.in b/programs/winemenubuilder/Mak
 index fe144efc53d..6aded38c4c4 100644
 --- a/programs/winemenubuilder/Makefile.in
 +++ b/programs/winemenubuilder/Makefile.in
-@@ -1,6 +1,7 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,5 +1,6 @@
  MODULE    = winemenubuilder.exe
  IMPORTS   = uuid windowscodecs shell32 shlwapi ole32 user32 advapi32
 +EXTRADEFS = -DBINDIR="\"${bindir}\""
diff --git a/patches/xactengine-initial/0003-xactengine3_7-tests-Add-Global-settings-test.patch b/patches/xactengine-initial/0003-xactengine3_7-tests-Add-Global-settings-test.patch
index 1d8a940..fed5e18 100644
--- a/patches/xactengine-initial/0003-xactengine3_7-tests-Add-Global-settings-test.patch
+++ b/patches/xactengine-initial/0003-xactengine3_7-tests-Add-Global-settings-test.patch
@@ -16,8 +16,7 @@ diff --git a/dlls/xactengine3_7/tests/Makefile.in b/dlls/xactengine3_7/tests/Mak
 index 693c3687728..fbcb357524c 100644
 --- a/dlls/xactengine3_7/tests/Makefile.in
 +++ b/dlls/xactengine3_7/tests/Makefile.in
-@@ -1,6 +1,9 @@
- EXTRADEFS = -DWINE_NO_LONG_TYPES
+@@ -1,5 +1,8 @@
  TESTDLL = xactengine3_7.dll
 -IMPORTS = ole32
 +IMPORTS = ole32 x3daudio1_7
-- 
2.34.1

