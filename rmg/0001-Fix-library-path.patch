From dc1ef237cdd472505da3c7a77317860a06fa5411 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Sun, 13 Nov 2022 18:23:10 -0300
Subject: [PATCH] Fix library path

---
 CMakeLists.txt                  | 8 ++++----
 Source/RMG-Core/Directories.cpp | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 377512c..dbcd5f9 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -113,10 +113,10 @@ if (PORTABLE_INSTALL)
     set(INSTALL_DESKTOP_FILE OFF)
 else()
     set(RMG_INSTALL_PATH "bin")
-    set(SYSTEM_LIB_INSTALL_PATH "lib")
-    set(LIB_INSTALL_PATH "lib/RMG")
-    set(CORE_INSTALL_PATH "lib/RMG/Core")
-    set(PLUGIN_INSTALL_PATH "lib/RMG/Plugin")
+    set(SYSTEM_LIB_INSTALL_PATH "lib${LIB_SUFFIX}")
+    set(LIB_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG")
+    set(CORE_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG/Core")
+    set(PLUGIN_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG/Plugin")
     set(DATA_INSTALL_PATH "share/RMG")
     set(INSTALL_DESKTOP_FILE ON)
     set(APPDATA_INSTALL_PATH "share/metainfo/")
diff --git a/Source/RMG-Core/Directories.cpp b/Source/RMG-Core/Directories.cpp
index 9ad9794..026d64a 100644
--- a/Source/RMG-Core/Directories.cpp
+++ b/Source/RMG-Core/Directories.cpp
@@ -245,7 +245,7 @@ std::filesystem::path CoreGetLibraryDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/";
+        directory += "/_RPMLIBDIR_/RMG/";
     }
 #endif // PORTABLE_INSTALL
     return directory.make_preferred();
@@ -272,7 +272,7 @@ std::filesystem::path CoreGetCoreDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/Core";
+        directory += "/_RPMLIBDIR_/RMG/Core";
     }
 #endif // CORE_INSTALL_PREFIX
     return directory.make_preferred();
@@ -299,7 +299,7 @@ std::filesystem::path CoreGetPluginDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/Plugin";
+        directory += "/_RPMLIBDIR_/RMG/Plugin";
     }
 #endif // CORE_INSTALL_PREFIX
     return directory.make_preferred();
-- 
2.43.0

