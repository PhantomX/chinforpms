From 32181a4beaa55a74c55713fd9ae05d03df385bc5 Mon Sep 17 00:00:00 2001
From: Phantom X <PhantomX@users.noreply.github.com>
Date: Sun, 13 Nov 2022 18:23:10 -0300
Subject: [PATCH] Fix library path

---
 CMakeLists.txt                  | 8 ++++----
 Source/RMG-Core/Directories.cpp | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 99ae4b8..80a1dd5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -70,10 +70,10 @@ if (PORTABLE_INSTALL)
     set(INSTALL_DESKTOP_FILE OFF)
 else()
     set(RMG_INSTALL_PATH "bin")
-    set(SYSTEM_LIB_INSTALL_PATH "lib")
-    set(LIB_INSTALL_PATH "lib/RMG")
-    set(CORE_INSTALL_PATH "lib/RMG/Core")
-    set(PLUGIN_INSTALL_PATH "lib/RMG/Plugin")
+    set(SYSTEM_LIB_INSTALL_PATH "lib${LIB_SUFFIX}")
+    set(LIB_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG")
+    set(CORE_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG/Core")
+    set(PLUGIN_INSTALL_PATH "${SYSTEM_LIB_INSTALL_PATH}/RMG/Plugin")
     set(DATA_INSTALL_PATH "share/RMG")
     set(INSTALL_DESKTOP_FILE ON)
     set(APPDATA_INSTALL_PATH "share/metainfo/")
diff --git a/Source/RMG-Core/Directories.cpp b/Source/RMG-Core/Directories.cpp
index 2499e7b..9df2d5d 100644
--- a/Source/RMG-Core/Directories.cpp
+++ b/Source/RMG-Core/Directories.cpp
@@ -139,7 +139,7 @@ std::filesystem::path CoreGetLibraryDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/";
+        directory += "/_RPMLIBDIR_/RMG/";
     }
 #endif // PORTABLE_INSTALL
     return directory;
@@ -158,7 +158,7 @@ std::filesystem::path CoreGetCoreDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/Core";
+        directory += "/_RPMLIBDIR_/RMG/Core";
     }
 #endif // PORTABLE_INSTALL
     return directory;
@@ -177,7 +177,7 @@ std::filesystem::path CoreGetPluginDirectory(void)
     else
     {
         directory = CORE_INSTALL_PREFIX;
-        directory += "/lib/RMG/Plugin";
+        directory += "/_RPMLIBDIR_/RMG/Plugin";
     }
 #endif // PORTABLE_INSTALL
     return directory;
-- 
2.41.0

